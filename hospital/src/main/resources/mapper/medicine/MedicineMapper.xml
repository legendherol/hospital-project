<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.hospital.mapper.MedicineMapper">
    
    <resultMap type="Medicine" id="MedicineResult">
        <result property="medicineMsgId"    column="medicine_msg_id"    />
        <result property="medicineName"    column="medicine_name"    />
        <result property="medicineNorm"    column="medicine_norm"    />
        <result property="productVender"    column="product_vender"    />
        <result property="userWay"    column="user_way"    />
        <result property="medicineMaterial"    column="medicine_material"    />
        <result property="medicineCode"    column="medicine_code"    />
        <result property="stock"    column="stock"    />
    </resultMap>

    <sql id="selectMedicineVo">
        select medicine_msg_id, medicine_name, medicine_norm, product_vender, user_way, medicine_material, medicine_code, stock from medicine
    </sql>

    <select id="selectMedicineList" parameterType="Medicine" resultMap="MedicineResult">
        <include refid="selectMedicineVo"/>
        <where>  
            <if test="medicineName != null  and medicineName != ''"> and medicine_name like concat('%', #{medicineName}, '%')</if>
            <if test="medicineNorm != null  and medicineNorm != ''"> and medicine_norm = #{medicineNorm}</if>
            <if test="productVender != null  and productVender != ''"> and product_vender = #{productVender}</if>
            <if test="userWay != null  and userWay != ''"> and user_way = #{userWay}</if>
            <if test="medicineMaterial != null  and medicineMaterial != ''"> and medicine_material = #{medicineMaterial}</if>
            <if test="medicineCode != null  and medicineCode != ''"> and medicine_code = #{medicineCode}</if>
            <if test="stock != null "> and stock = #{stock}</if>
        </where>
    </select>
    
    <select id="selectMedicineByMedicineMsgId" parameterType="Long" resultMap="MedicineResult">
        <include refid="selectMedicineVo"/>
        where medicine_msg_id = #{medicineMsgId}
    </select>
        
    <insert id="insertMedicine" parameterType="Medicine" useGeneratedKeys="true" keyProperty="medicineMsgId">
        insert into medicine
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="medicineName != null">medicine_name,</if>
            <if test="medicineNorm != null">medicine_norm,</if>
            <if test="productVender != null">product_vender,</if>
            <if test="userWay != null">user_way,</if>
            <if test="medicineMaterial != null">medicine_material,</if>
            <if test="medicineCode != null">medicine_code,</if>
            <if test="stock != null">stock,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="medicineName != null">#{medicineName},</if>
            <if test="medicineNorm != null">#{medicineNorm},</if>
            <if test="productVender != null">#{productVender},</if>
            <if test="userWay != null">#{userWay},</if>
            <if test="medicineMaterial != null">#{medicineMaterial},</if>
            <if test="medicineCode != null">#{medicineCode},</if>
            <if test="stock != null">#{stock},</if>
         </trim>
    </insert>

    <update id="updateMedicine" parameterType="Medicine">
        update medicine
        <trim prefix="SET" suffixOverrides=",">
            <if test="medicineName != null">medicine_name = #{medicineName},</if>
            <if test="medicineNorm != null">medicine_norm = #{medicineNorm},</if>
            <if test="productVender != null">product_vender = #{productVender},</if>
            <if test="userWay != null">user_way = #{userWay},</if>
            <if test="medicineMaterial != null">medicine_material = #{medicineMaterial},</if>
            <if test="medicineCode != null">medicine_code = #{medicineCode},</if>
            <if test="stock != null">stock = #{stock},</if>
        </trim>
        where medicine_msg_id = #{medicineMsgId}
    </update>

    <delete id="deleteMedicineByMedicineMsgId" parameterType="Long">
        delete from medicine where medicine_msg_id = #{medicineMsgId}
    </delete>

    <delete id="deleteMedicineByMedicineMsgIds" parameterType="String">
        delete from medicine where medicine_msg_id in 
        <foreach item="medicineMsgId" collection="array" open="(" separator="," close=")">
            #{medicineMsgId}
        </foreach>
    </delete>
</mapper>